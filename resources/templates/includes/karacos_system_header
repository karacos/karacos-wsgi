<% import karacos %>
<link rel="stylesheet" type="text/css" href="/_browser/karacos-ui/css/reset.css" media="screen" />
<title>${instance.__get_title__()}</title>
% if 'fb_appId' in instance.__domain__:
	<meta property="fb:app_id" content="${instance.__domain__['fb_appId']}" />
% endif
% if 'description' in instance:
  	<meta name="description" content="${instance['description']}" />
% else:
  	<meta name="description" content="${instance['name']}" />
% endif
% if 'keywords' in instance:
  	<meta name="keywords" content="${instance['keywords']}" />
% else:
    <meta name="keywords" content="${instance['name']}" />
% endif
<link rel="canonical" href="http://${instance.__domain__['fqdn']}${instance._get_action_url()}" />
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
{"parsetags": "explicit", "lang": "fr"}
</script>
<script type="text/javascript">
window.kc_method_result = false;
% if result:
kc_method_result = ${karacos.json.dumps(result)};
%endif
// prevent no console...
if (window.console === undefined || window.console === null) {
	window.console = {};
}
if (console.log === undefined || console.log === null) {
	console.log = function(){};
}
// check if an extension fo require exists, creates otherwise
if (window.kc_requireConf === undefined || window.kc_requireConf === null) {
	window.kc_requireConf = {}
} 
kc_requireConf.baseUrl = "/_browser/aloha/src/lib";
kc_requireConf.waitSeconds = 15;
kc_requireConf.locale = "fr-fr";
if (kc_requireConf.paths === undefined || kc_requireConf.paths === null) {
	window.kc_requireConf.paths = {}
}
kc_requireConf.paths.karacos = "/_browser/karacos-ui"; 
kc_requireConf.paths.fragment = "/fragment";

</script>
<link rel="stylesheet" href="/_browser/karacos-ui/css/jquery.ui.menu.css">
<script src="/_browser/karacos-ui/vendor/jquery-1.6.1.js"></script>
<script src="/_browser/karacos-ui/deps/require.js"></script>
<script type="text/javascript">
var jQuery = window.jQuery.noConflict( true );
require.config(kc_requireConf);
jQuery(function() {
  	window.Aloha = window.Aloha || {};
  
	window.kcQuery = window.jQuery = jQuery;
	Aloha.settings = {	baseUrl: "/_browser/aloha/src/lib",
					locale: "fr-fr",
					jQuery: jQuery,
					floatingmenu: {
						width: 430
					},
					plugins: {
						
						format: {
							editables: {
								'[property*="title"]': [],
								'[property*="description"]': []
							}
						},
						link: {
							editables: {
								'[property*="title"]': [],
								'[property*="description"]': []
							}
						},
						 image: {
							'max_width': '50px',
							'max_height': '50px',
							editables: {
								'[property*="title"]':undefined,
								'[property*="description"]': undefined
							}
						},
						draganddropfiles: {
							upload : { config: { callback: function dropFileCallback(responseString,fileItem) {
										try {
											var result = jQuery.parseJSON(responseString);
											if (result.success)
												return result.data;
										} catch(e) {
											return false;
										}
									} // function callback
								} // config
							}, // upload
							
							editables: {
								'[property*="description"]': {},
								'[property*="title"]': {},
								'[typeof*="Domain"] [property*="content"]': {}
								
							}
						} // draganddropfiles
					} //plugins
				};
  	require(["karacos/main"],function(){
		console.log("loaded karacos/main");
  	});

});
  </script>
<link rel="stylesheet" type="text/css" href="/_browser/karacos-ui/css/karacos_widgets.css" media="screen" />
% if 'head_bloc' in instance.__domain__:
		${instance.__domain__['head_bloc']}
% endif